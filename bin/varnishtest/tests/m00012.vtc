varnishtest "Test VMOD BLOBS"

varnish v1 -errvcl {BLOBs can only be used as arguments to VMOD functions.} {

	backend b1 {.host = "${bad_backend}";}

	sub vcl_deliver {
		set resp.http.foo = req.hash;
	}
}

varnish v1 -errvcl {Expression has type HTTP, expected BLOB} {
	import blob;
	backend be none;
	sub vcl_deliver {
		blob.encode(blob = req);
	}
}
